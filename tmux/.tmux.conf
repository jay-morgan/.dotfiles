set-option -g history-limit 100000
set-option -g default-terminal "tmux-256color"
set-option -sa terminal-features ',xterm-256color:RGB'
set-option -g detach-on-destroy off
set -sg escape-time 0
set -g mode-keys vi
set -g mouse on
set -g base-index 1
set -g renumber-windows on
set -g set-clipboard on

unbind C-b
set -g prefix C-a

bind -n S-h select-pane -L
bind -n S-j select-pane -D
bind -n S-k select-pane -U
bind -n S-l select-pane -R
bind -n S-Up resize-pane -U
bind -n S-Down resize-pane -D
bind -n S-Left resize-pane -L
bind -n S-Right resize-pane -R
bind -n C-z send-keys "~/.local/bin/tmux-sessionizer" "Enter"
bind -n C-x send-keys "~/.local/bin/tmux-session-switcher" "Enter"
bind -n C-c send-keys "~/.local/bin/tmux-cascading-close-switcher" "Enter"
bind -n C-v send-keys "~/.local/bin/tmux-windowizer" "Enter"
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe 'xclip -in -selection clipboard &> /dev/null'
bind -T copy-mode-vi Enter send-keys -X cancel

bind C-t neww -c "#{pane_current_path}" "[[ -e TODO.md ]] && nvim TODO.md || nvim ~/personal/.dotfiles/todo.md"

# set -g @plugin 'tmux-plugins/tmux-continuum'
# set -g @continuum-restore 'on'
# set -g @plugin 'tmux-plugins/tmux-resurrect'
# set -g @resurrect-strategy-nvim 'session'
# set -g @resurrect-capture-pane-contents 'on'

# run-shell "theme=\$(gsettings get org.gnome.desktop.interface gtk-theme | tr -d \"'\" | xargs); \
# git_user=\$(/usr/bin/git config user.name); \
# if [[ \$theme === *'Pop'* ]]; then \
# condition=\$([[ \$theme == *'Pop'* ]] && echo true || echo false); \
# echo \"Processed theme should be LIGHT, it is: \$theme, condition = \$condition\"\; \    tmux set-option -g status-style 'fg=#7D6658, bg=#E9E1DB'; \
#     tmux set-option -g status-right \"#[fg=#7D6658,bg=#E9E1DB]\$git_user %H:%M %a %d-%b-%Y \"; \
#     tmux set-option -g status-left '#[fg=#7D6658,bg=#E9E1DB][#S] '; \
#     tmux set-option -g window-status-current-style 'fg=#7D6658, bg=#E9E1DB'; \
#     tmux set-option -g window-status-style 'fg=#7D6658,bg=#E9E1DB'; \
#     tmux set-option -g status-justify left; \
#     tmux set-option -g message-command-style 'bg=default,fg=#7D6658'; \
#     tmux set-option -g message-style 'bg=default,fg=#7D6658'; \
#     tmux set-option -g mode-style 'bg=default,fg=#7D6658'; \
#     tmux set-option -g pane-active-border-style 'fg=#7D6658'; \
#     tmux set-option -g pane-border-style 'fg=#7D6658'; \
#     tmux set-option -g status-left-length 200; \
#     tmux set-option -g status-right-length 200; \
#     tmux set-option -g status-position bottom; \
# else \
# condition=\$([[ \$theme == *'Pop'* ]] && echo true || echo false); \
# echo \"Processed theme should be DARK, it is: \$theme, condition = \$condition\"\; \    tmux set-option -g status-style 'fg=#C1A78E, bg=#34302C'; \
#     tmux set-option -g status-right \"#[fg=#C1A78E,bg=#34302C]\$git_user %H:%M %a %d-%b-%Y \"; \
    tmux set-option -g status-left '[#S] '; \
#     tmux set-option -g window-status-current-style 'fg=#C1A78E, bg=#34302C'; \
#     tmux set-option -g window-status-style 'fg=#C1A78E,bg=#34302C'; \
#     tmux set-option -g status-justify left; \
#     tmux set-option -g message-command-style 'bg=default,fg=#C1A78E'; \
#     tmux set-option -g message-style 'bg=default,fg=#C1A78E'; \
#     tmux set-option -g mode-style 'bg=default,fg=#C1A78E'; \
#     tmux set-option -g pane-active-border-style 'fg=#C1A78E'; \
#     tmux set-option -g pane-border-style 'fg=#C1A78E'; \
#     tmux set-option -g status-left-length 200; \
#     tmux set-option -g status-right-length 200; \
#     tmux set-option -g status-position bottom; \
# fi"

run-shell "theme=\$(gsettings get org.gnome.desktop.interface gtk-theme | tr -d \"'\"); \
git_user=\$(/usr/bin/git config user.name); \
case \"\$theme\" in \
    Pop) \
        tmux set-option -g status-style 'fg=#7D6658, bg=#E9E1DB'; \
        tmux set-option -g status-right \"#[fg=#7D6658,bg=#E9E1DB]\$git_user %H:%M %a %d-%b-%Y \"; \
        tmux set-option -g status-left '#[fg=#7D6658,bg=#E9E1DB][#S] '; \
        tmux set-option -g window-status-current-style 'fg=#7D6658, bg=#E9E1DB'; \
        tmux set-option -g window-status-style 'fg=#7D6658,bg=#E9E1DB'; \
        tmux set-option -g status-justify left; \
        tmux set-option -g message-command-style 'bg=default,fg=#7D6658'; \
        tmux set-option -g message-style 'bg=default,fg=#7D6658'; \
        tmux set-option -g mode-style 'bg=default,fg=#7D6658'; \
        tmux set-option -g pane-active-border-style 'fg=#7D6658'; \
        tmux set-option -g pane-border-style 'fg=#7D6658'; \
        tmux set-option -g status-left-length 200; \
        tmux set-option -g status-right-length 200; \
        tmux set-option -g status-position bottom; \
        ;; \
    *) \
        tmux set-option -g status-style 'fg=#C1A78E, bg=#34302C'; \
        tmux set-option -g status-right \"#[fg=#C1A78E,bg=#34302C]\$git_user %H:%M %a %d-%b-%Y \"; \
        tmux set-option -g status-left '#[fg=#C1A78E,bg=#34302C][#S] '; \
        tmux set-option -g window-status-current-style 'fg=#C1A78E, bg=#34302C'; \
        tmux set-option -g window-status-style 'fg=#34302C'; \
        tmux set-option -g status-justify left; \
        tmux set-option -g message-command-style 'bg=default,fg=#C1A78E'; \
        tmux set-option -g message-style 'bg=default,fg=#C1A78E'; \
        tmux set-option -g mode-style 'bg=default,fg=#C1A78E'; \
        tmux set-option -g pane-active-border-style 'fg=#C1A78E'; \
        tmux set-option -g pane-border-style 'fg=#C1A78E'; \
        tmux set-option -g status-left-length 200; \
        tmux set-option -g status-right-length 200; \
        tmux set-option -g status-position bottom; \
        ;; \
esac"

run '~/.tmux/plugins/tpm/tpm'